# 实验报告  

## 1 实验目的  
本次实验需要实现中文分词，提供的文件如下：
- datasets/training.txt  
用于训练的语料，保留了标点符号，分词结果用双空格分割  

- datasets/training\_vocab.txt  
由training.txt得到的词汇表

- datasets/test.txt  
用于测试的语料，未分词

- datasets/test\_gold.txt  
用于测试的语料，是test.txt的标准分词结果

## 2 实验过程  
由于硬件条件限制，难以跑通计算量太大的算法，目前采用统计学方法实现分词目标，采用的初始方案为HMM和MM，并在此基础上尝试混合两种方法

### 2.1 HMM  
一开始使用朴素的HMM模型，分词结果中常出现符号或者数字相关的分词错误，如日期、百分数等。针对该问题，在HMM的基础上添加正则表达式匹配  

实验结果见下:
|METHOD|RECALL|PRECISION|F1|OOV Rate|OOV Recall|IV Recall|
|:----|:----|:----|:----|:----|:----|:----|
|**HMM**|0.730|**0.759**|0.744|0.058|0.331|0.745|

### 2.2 HMM\_REGEX
在朴素HMM模型上添加正则匹配，实现方法为，针对每一行待处理文本，首先匹配正则表达式，然后将剩下未匹配的部分交给HMM处理

实验结果见下:
|METHOD|RECALL|PRECISION|F1|OOV Rate|OOV Recall|IV Recall|
|:----|:----|:----|:----|:----|:----|:----|
|**HMM_REGEX**|0.785|**0.786**|0.785|0.058|0.638|0.794|

### 2.3 MM  
朴素的MM方法

实验结果见下:
|METHOD|RECALL|PRECISION|F1|OOV Rate|OOV Recall|IV Recall|
|:----|:----|:----|:----|:----|:----|:----|
|**BIMM**|0.909|**0.845**|0.876|0.058|0.069|0.961|

### 2.4 MIX\_1D
做完HMM与MM的实验后，发现MM的结果显著优于HMM，说明词典在测试集上的作用很好。在此基础上产生构想，结合HMM与MM的优点生成混合算法。在登录词上，MM的效果更好，优先使用MM，但MM匹配结果只有单字词时，发挥HMM相比MM对未登录词准确率更高的优势，中止MM，交由HMM处理  

处理流程见下：
```
                  +———————+       +————+       +—————+
raw_sentence ————>| REGEX |——————>| MM |——————>| HMM |————> seg_result
                  +———————+       +————+       +—————+
```
针对每一行待处理的文本，首先进行正则表达式匹配，未匹配的部分交给MM处理，MM匹配会返回mmlist与remaining，mmlst为匹配成功的词的列表(不含单字词)，remaining为从未匹配词开始的剩余部分，将该部分部分交给HMM处理，得到最终的分词结果

实验结果见下:
|METHOD|RECALL|PRECISION|F1|OOV Rate|OOV Recall|IV Recall|
|:----|:----|:----|:----|:----|:----|:----|
|**MIX_1D**|0.922|**0.902**|0.912|0.058|0.431|0.952|

该方案的分词结果显著好于MM与HMM  

### 2.4 MIX\_2D
在MIX\_1D方案中的MM部分，我们是将输入同时进行fmm和rmm处理，采用返回列表更长的方案，结束MM部分，过程中只进行了一个方向的MM匹配。考虑到未匹配部分的反方向仍然有可能存在登录词，故尝试采取双向MM。先用fmm处理输入，再将未匹配部分交给rmm处理，最后再将仍未匹配的部分送到HMM

实验结果见下:
|METHOD|RECALL|PRECISION|F1|OOV Rate|OOV Recall|IV Recall|
|:----|:----|:----|:----|:----|:----|:----|
|**MIX_2D**|0.918|**0.895**|0.906|0.058|0.408|0.949|

出乎意料，理论上该方法应该优于MIX\_1D，因为该方案多处理了MIX\_1D方案未照顾的另一方向。但结果显示MIX\_2D的效果比MIX\_1D差  

分析分词结果，发现MIX\_1D与MIX\_2D的差别在于三字词的划分，假设MIX\_1D的MM部分已结束，MIX\_2D正在反向执行MM，遇到'取得了'时，MIX\_1D会使用HMM分词，而MIX\_2D会使用MM分词，而此时HMM的效果好于MM，故MIX\_2D结果劣于MIX\_1D  

## 3 实验结果

实验结果见下:
|METHOD|RECALL|PRECISION|F1|OOV Rate|OOV Recall|IV Recall|
|:----|:----|:----|:----|:----|:----|:----|
|**HMM**|0.730|**0.759**|0.744|0.058|0.331|0.745|
|**HMM_REGEX**|0.785|**0.786**|0.785|0.058|0.638|0.794|
|**BIMM**|0.909|**0.845**|0.876|0.058|0.069|0.961|
|**MIX_1D**|0.922|**0.902**|0.912|0.058|0.431|0.952|
|**MIX_2D**|0.918|**0.895**|0.906|0.058|0.408|0.949|
